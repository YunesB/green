!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}n.r(t);var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=document.getElementById(t),this.handleEscClose=this._handleEscClose.bind(this)}return function(e,t,n){t&&o(e.prototype,t),n&&o(e,n)}(e,[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keyup",this.handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keyup",this.handleEscClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("click",(function(t){t.target.closest(".popup__container")||e.close()})),this._popup.querySelector(".popup__close").addEventListener("click",(function(){e.close()}))}}]),e}();function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var s=function(){function e(t,n,o,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t.name,this._author=t.author,this._text=t.text,this._poemTemplate=n,this._externalStr=o,this._inputSelector=i}return function(e,t,n){t&&r(e.prototype,t),n&&r(e,n)}(e,[{key:"_getTemplate",value:function(){return document.getElementById(this._poemTemplate).content.querySelector(".poem__list-item").cloneNode(!0)}},{key:"generateItem",value:function(){return this._element=this._getTemplate(),this._element.querySelector(".poem__name").textContent=this._name,this._element.querySelector(".poem__author").textContent=this._author,this._styleStr(this._externalStr),this._copyText(this._externalStr,this._inputSelector),this._element.querySelector(".poem__text").innerHTML=this._text,this._element}},{key:"_styleStr",value:function(e){this._text=this._text.replace(e,'<span class="highlighted-word">'.concat(e,"</span>"))}},{key:"_copyText",value:function(e,t){var n=this;this._element.querySelector(".poem__button").addEventListener("click",(function(){n._text=n._text.replace('<span class="highlighted-word">'.concat(e,"</span>"),e),t.append(n._text)}))}}]),e}(),c=document.getElementById("about"),a=document.querySelector(".add-initiative__show-hint"),u=document.getElementById("searchPoem"),l=document.getElementById("refreshList"),p=document.getElementById("inputPoem"),d=document.getElementById("poemList"),m=document.querySelector(".poem__default-item"),f=document.getElementById("poemTextarea"),h=new i("aboutPopup");h.setEventListeners();var _=new i("hintPopup");function y(e,t,n,o){return new s(e,t,n,o).generateItem()}_.setEventListeners(),u.addEventListener("click",(function(e){e.preventDefault(),d.classList.add("display-item");var t,n=p.value;u.classList.add("button_disabled"),u.disabled=!0,(t=n,fetch("https://www.buymebuyme.xyz/?q=%20".concat(t,"%20"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return Promise.reject("Ошибка: ".concat(e.status," - ").concat(e.statusText))}))).then((function(e){if(e.length>0){console.log(e);for(var t=0;t<e.length;t++){var o=y(e[t].fields,"poemTemplate",n,f);d.append(o)}}else m.classList.add("display-item")})).catch((function(e){console.log(e)}))})),l.addEventListener("click",(function(){d.innerHTML="",u.classList.remove("button_disabled"),u.disabled=!1,d.classList.remove("display-item"),m.classList.remove("display-item")})),c.addEventListener("click",(function(){h.open()})),a.addEventListener("mouseover",(function(){_.open()})),a.addEventListener("mouseout",(function(){_.close()}))}]);